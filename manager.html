<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>บันทึกวันเดือนปี</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --bg:#f6f8fc; --card:#ffffff; --text:#0f172a; --muted:#64748b; --line:#e2e8f0;
      --blue:#2563eb; --blue-2:#1d4ed8;
    }
    html,body{
      margin:0;padding:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    }
    .wrap{max-width:500px;margin:80px auto;padding:0 16px}
    .card{
      background:var(--card);border:1px solid var(--line);border-radius:14px;
      padding:24px;box-shadow:0 4px 16px rgba(2,6,23,.08);text-align:center;
    }
    h1{margin:0 0 12px;font-size:22px}
    .date{font-size:28px;font-weight:700;color:var(--blue);margin-bottom:20px}
    button{
      background:linear-gradient(180deg,var(--blue),var(--blue-2));
      color:#fff;border:none;border-radius:10px;padding:12px 20px;
      cursor:pointer;font-size:16px;
    }
    button:hover{opacity:.9}
    .msg{margin-top:12px;font-size:14px}
    .ok{color:green}
    .err{color:red}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>วันเดือนปีปัจจุบัน</h1>
    <div id="today" class="date">--/--/----</div>
    <button onclick="sendDate()">บันทึกวันที่นี้</button>
    <div id="msg" class="msg"></div>
  </div>
</div>

<script>
  // === ตั้งค่า API ของคุณ (n8n หรือ Apps Script) ===
  const API_URL = "https://YOUR-N8N-DOMAIN/api/save-date";

  function getTodayLocal(){
    const now = new Date();
    const tz = new Date(now.getTime() - now.getTimezoneOffset()*60000);
    const yyyyMmDd = tz.toISOString().slice(0,10); // YYYY-MM-DD
    const [y,m,d] = yyyyMmDd.split('-');
    return { yyyyMmDd, ddMmYyyy:`${d}/${m}/${y}` };
  }

  // แสดงวันปัจจุบัน
  const t = getTodayLocal();
  document.getElementById('today').textContent = t.ddMmYyyy;

  async function sendDate(){
    const msg = document.getElementById('msg');
    msg.textContent = "กำลังบันทึก...";
    try{
      const r = await fetch(API_URL,{
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ date: t.yyyyMmDd })
      });
      if(!r.ok) throw new Error("HTTP "+r.status);
      const data = await r.json();
      msg.textContent = "บันทึกสำเร็จ ✅";
      msg.className = "msg ok";
    }catch(e){
      msg.textContent = "บันทึกไม่สำเร็จ ❌: "+e.message;
      msg.className = "msg err";
    }
  }
</script>
</body>
</html>
